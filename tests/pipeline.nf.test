nextflow_pipeline {

    name "Test Workflow NFCORE_STABLEEXPRESSION"
    script "main.nf"

    test("Full test") {

        tag "pipeline_full"

        when {
            params {
                species = 'solanum tuberosum'
                datasets = "tests/input/custom_datasets/input.csv"
                expression_atlas_accessions = "E-MTAB-552,E-GEOD-61690"
                fetch_expression_atlas_accessions = true
                expression_atlas_keywords = "phloem"
            }
        }

        then {
            assert workflow.success
        }
    }

}
